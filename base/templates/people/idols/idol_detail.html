{% extends "layouts/site_base.html" %}
{% load music_tags %}
{% load typogrify_tags %}

{% block title %}{{ object.romanized_name }} ({{ object.name }}){% endblock %}
{% block meta %}
<link rel="canonical" href="{{ request.build_absolute_uri }}">
{% endblock %}
{% block body-class %}profile idol-profile{% endblock %}
{% block content %}
<header class="section-masthead section-photo" style="">
    <div class="container">
        <div class="metadata-names">
            <h1><span class="name">{{ object.name }}</span> <span class="romanized-name">{{ object.romanized_name }}</span></h1>
            {% with object.primary_membership as primary %}
            <p class="standing">{{ primary.standing }}{% if primary.group.romanized_name != "Soloist" %} of {{ primary.group }}{% endif %}</p>
            {% endwith %}
        </div><!-- .metadata-names -->
        <div class="section-vitals">
            <div class="metadata-photo">{# <img src="http://hellosayunii.com/wp-content/uploads/2009/07/1247273231620.jpg" class="img-responsive"> #}</div>
            <ul class="metadata-vitals">
                <li class="vital-age"><span class="ss-icon ss-exercise"></span> {% firstof object.age "Unknown" %} <span>Age</span></li>
                <li class="vital-birthday"><span class="ss-icon ss-calendar"></span> {% firstof object.birthdate|date:"F j, Y" "Unknown" %} <span>Birthday</span></li>
                <li class="vital-bloodtype"><span class="ss-icon ss-anatomicalheart"></span> {% firstof object.bloodtype "Unknown" %} <span>Bloodtype</span></li>
                <li class="vital-height"><span class="ss-icon ss-tapemeasure"></span> {% firstof object.height "Unknown" %}{% if object.height %}cm{% endif %} <span>Height</span></li>
            </ul><!-- .metadata-vitals -->
        </div><!-- .section-vitals -->
    </div><!-- .container -->
</header><!-- .section-masthead -->

<section class="memberships">
    <div class="container">
        {% with object.primary_membership as primary %}
        <div class="membership-primary">
            <div class="membership-section-title"><span class="pill">Primary Focus</span></div>
            <div class="group-image">
                <div class="empty-image"><span class="ss-icon ss-usergroup"></span></div>
            </div><!-- .group-image -->
            <div class="group-metadata">
                <span class="name">{{ primary.group.name }}</span>
                <a href="{{ primary.group.get_absolute_url }}"><span class="romanized-name">{{ primary.group }}</span></a>
                <span class="tenure">{{ primary.started }}&ndash;{% if primary.ended %}{{ primary.ended }}{% else %}Present{% endif %} <span class="tenure in-days">({{ primary.tenure_in_days }} days)</span></span>
            </div><!-- .group-metadata -->
        </div><!-- .membership-primary -->
        {% endwith %}
        {% if memberships %}
        <div class="membership-secondary">
            <div class="membership-section-title"><span class="pill">Other Groups</span></div>
            <ul class="membership-list">
            {% for membership in memberships %}
                <li class="membership">
                    <div class="group-image">
                        <div class="empty-image"></div>
                    </div><!-- .group-image -->
                    <span class="name">{{ membership.group.name }}</span>
                    <a href="{{ membership.group.get_absolute_url }}"><span class="romanized-name">{{ membership.group }}</span></a>
                    <span class="tenure">{{ membership.started }}&ndash;{% if membership.ended %}{{ membership.ended }}{% else %}Present{% endif %} <span class="tenure in-days">({{ membership.tenure_in_days }} days)</span></span>
                </li><!-- .membership -->
            {% endfor %}
            </ul><!-- .membership-list -->
        </div><!-- .membership-secondary -->
        {% else %}
        {# @TODO: Empty state. #}
        {% endif %}
    </div><!-- .container -->
</section><!-- .memberships -->

<section class="participations">
    <div class="container">
        <h2 class="section-title">Contributions to Hello! Project</h2>
        <ul class="participation-list">
            <li class="participation group-participation">
                <div class="statistic">
                    <span class="count">{{ object.memberships.count }}</span>
                    <span class="ss-icon ss-usergroup"></span> <span class="type">groups</span>
                </div>
                <div class="latest-heading"><span class="pill">Main</span></div>
                <div class="latest">
                    {% with object.primary_membership as primary %}
                    <a href="{{ primary.group.get_absolute_url }}">{{ primary.group }}</a>
                    <div class="subtext">
                    Member
                    {% if primary.is_active %}
                        since {{ primary.started|date:"F j, Y" }}
                    {% else %}
                        from {{ primary.started|date:"F j, Y" }}&ndash;{{ primary.ended|date:"F j, Y" }}
                    {% endif %}

                    {% if primary.is_leader %} and leader
                        {% if not primary.leadership_ended %}
                            since {{ primary.leadership_started|date:"F j, Y" }}
                        {% else %}
                            from {{ primary.leadership_started|date:"F j, Y"}}&ndash;{{ primary.leadership_ended|date:"F j, Y" }}
                        {% endif %}
                    {% endif %}
                    </div>
                    {% endwith %}
                </div>
            </li><!-- .group-participation -->
            <li class="participation single-participation">
                <div class="statistic">
                    <span class="count">{{ singles|length }}</span>
                    <span class="ss-icon ss-music"></span> <span class="type">singles</span>
                </div>
                <div class="latest-heading"><span class="pill">{% if object.primary_membership.is_active %}Latest{% else %}Last{% endif %}</span></div>
                <div class="latest">
                    {% with object.latest_single as single %}
                    <a href="{{ single.get_absolute_url }}">{{ single }}</a>
                    <div class="subtext">
                        Released {{ single.released|date:"Y/m/d" }} ({{ single.released|timesince }} ago) in {{ single.editions.count }} edition{{ single.editions.count|pluralize }}
                    </div>
                    {% endwith %}
                </div>
            </li><!-- .single-participation -->
            <li class="participation album-participation">
                <div class="statistic">
                    <span class="count">{{ albums|length }}</span>
                    <span class="ss-icon ss-music"></span> <span class="type">albums</span>
                </div>
                <div class="latest-heading"><span class="pill">{% if object.primary_membership.is_active %}Latest{% else %}Last{% endif %}</span></div>
                <div class="latest">
                    {% with object.latest_album as album %}
                    <a href="{{ album.get_absolute_url }}">{{ album }}</a>
                    <div class="subtext">
                        Released {{ album.released|date:"Y/m/d" }} ({{ album.released|timesince }} ago) in {{ album.editions.count }} edition{{ album.editions.count|pluralize }}
                    </div>
                    {% endwith %}
                </div>
            </li><!-- .album-participation -->
        </ul><!-- .participation-list -->
    </div><!-- .container -->
</div><!-- .participations -->

<section class="releases">
    <div class="container">
        <div class="releases-singles">
            <h2 class="section-title">Singles {{ singles|length }}</h2>
            <ul class="release-list">
            {% for release in singles %}
                <li class="release">
                    <div class="release-image">
                        <div class="empty-image"><span class="ss-icon ss-disc"></span></div>
                    </div><!-- .release-image -->
                    <div class="release-meta">
                        <span class="name">{{ release.name }}</span>
                        <a href="{{ release.get_absolute_url }}"><span class="romanized-name">{{ release.romanized_name|typogrify }}</span></a>
                        <span class="release-participants">{% contextual_participants release=release idol=object %}</span>
                        <div class="release-date">{{ release.released|date:"Y/m/d" }} &middot; {{ release.editions.count }} edition{{ release.editions.count|pluralize }}</div>
                    </div><!-- .release-meta -->
                </li><!-- .release -->
            {% endfor %}
            </ul><!-- .release-list -->
        </div><!-- .releases-singles -->
        <div class="releases-albums">
            <h2 class="section-title">Albums {{ albums|length }}</h2>
            <ul class="release-list">
            {% for release in albums %}
                <li class="release">
                    <div class="release-image">
                        <div class="empty-image"><span class="ss-icon ss-disc"></span></div>
                    </div><!-- .release-image -->
                    <div class="release-meta">
                        <span class="name">{{ release.name }}</span>
                        <a href="{{ release.get_absolute_url }}"><span class="romanized-name">{{ release.romanized_name|typogrify }}</span></a>
                        <span class="release-participants">{% contextual_participants release=release idol=object %}</span>
                        <div class="release-date">{{ release.released|date:"Y/m/d" }} &middot; {{ release.editions.count }} edition{{ release.editions.count|pluralize }}</div>
                    </div><!-- .release-meta -->
                </li><!-- .release -->
            {% endfor %}
            </ul><!-- .release-list -->
        </div><!-- .releases-albums -->
    </div><!-- .container -->
</section><!-- .releases -->
{% endblock content %}
