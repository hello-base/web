{% extends "layouts/site_base.html" %}
{% load correlation_tags static %}

{% block title %}{{ year|date:"Y" }} Happenings{% endblock %}
{% block body-class %}override{% endblock %}
{% block content %}
<section class="happenings happening-decade-{{ year|date:'Y'|slice:':3' }}0">
  <header class="override-header">
    <div class="container">
      <h1 class="happening-header"><span class="year">{{ year|date:"Y" }}</span> Happenings</h1>
    </div>

    <div class="happening-navigation">
      <div class="container">
        <div class="previous-year">
        {% if previous_year %}
          <a href="{% url 'happenings-by-year' previous_year|date:'Y' %}"><span class="ss-icon ss-navigateleft"></span> {{ previous_year|date:"Y" }}</a>
        {% endif %}
        </div>
        <div class="happening-decades">
          <header class="happening-decades-header">
            <a href="javascript:;" class="happening-toggle">
              <span class="ss-icon ss-calendar"></span>
              <strong>Other Years</strong>
              <span class="ss-icon ss-navigatedown"></span>
            </a>
          </header>
          <ul class="happening-decade-list">
          {% for decade, values in years.items reversed %}
            <li class="{{ decade }}">
              <strong>{{ decade }}</strong>
              <ul class="happening-year-list">
              {% for value in values %}
                <li {% if year == value %}class="selected"{% endif %}>
                  <a href="{% url 'happenings-by-year' value|date:'Y' %}">{{ value|date:"Y" }}</a>
                </li>
              {% endfor %}
              </ul>
            </li>
          {% endfor %}
          </ul>
        </div>
        <div class="next-year">
        {% if next_year %}
          <a href="{% url 'happenings-by-year' next_year|date:'Y' %}">{{ next_year|date:"Y" }} <span class="ss-icon ss-navigateright"></span></a>
        {% endif %}
        </div>
      </div>
    </div>
  </header>

  {% include "correlations/partials/happenings_year_statistics.html" %}

  <div class="happenings-list">
    <div class="container">
      {% comment %}
      <ul class="happening-month-list">
      {% for date in date_list %}
        <li><a href="#{{ date|date:"F"|lower }}">{{ date|date:"F" }}</a></li>
      {% endfor %}
      </ul>
      {% endcomment %}

      <ul class="happening-month-list">
      {% for month, days in objects.iteritems %}
        <li class="happening-month" id="{{ month|month_name|lower }}">
          <h2 class="happening-month-name">
            {{ month|month_name }}
            <small>{{ year|date:"Y" }}</small>
          </h2>
          <ul class="happening-date-list">
          {% for day, events in days.iteritems %}
            <li class="happening-date">
              <h3 class="happening-date-name">{{ day }}</h3>
              <ul class="happening-event-list">
              {% for event in events %}
                <li>
                  {% include event.get_include_template %}
                  {# <strong><a href="{{ event.actor.get_absolute_url }}">{{ event.actor.romanized_name }}</a></strong> {{ event.identifier }} {{ event.date_field }} {{ event.content_object.group }} #}
                </li>
              {% endfor %}
              </ul>
            </li>
          {% endfor %}
          </ul>
        </li>
      {% endfor %}
      </ul>

      {% comment %}
      {% regroup object_list by month as month_list %}
      <ul class="happening-month-list">
      {% for month in month_list %}
        <li class="happening-month" id="{{ month.grouper|month_name|lower }}">
          <h2>
            {{ month.grouper|month_name }}
            <small>{{ year|date:"Y" }}</small>
          </h2>
          <ul class="happening-date-list">
          {% include "correlations/partials/happenings_year_list_item.html" %}
          </ul>
        </li>
      {% endfor %}
      </ul>
      {% endcomment %}
    </div>
  </div>
</section>
{% endblock content %}
