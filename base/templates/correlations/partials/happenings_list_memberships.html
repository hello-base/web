{% load static %}

{% with event.content_object as object %}
{% if event.date_field == "started" %}
  {% if object.group.romanized_name == "Soloist" %}
  <div class="happening-event">
    <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> becomes a soloist
  </div>
  <div class="happening-illustration">
    <img src="{% get_media_prefix %}{{ object.idol.image }}">
    <div class="happening-action"><span class="ss-icon ss-mic"></span></div>
  </div>
  {% else %}
  <div class="happening-event">
    <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> joins <a href="{{ object.group.get_absolute_url }}">{{ object.group }}</a>
  </div>
  <div class="happening-illustration">
    <img src="{% get_media_prefix %}{{ object.idol.image }}">
    <div class="happening-action"><span class="ss-icon ss-download"></span></div>
    <img src="{% get_media_prefix %}{{ object.group.image }}">
  </div>
  {% endif %}
{% endif %}
{% if event.date_field == "ended" %}
  {% if object.group.romanized_name == "Soloist" %}
  <div class="happening-event">
    <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> discontinues soloist work
  </div>
  <div class="happening-illustration">
    <div class="happening-actor"><img src="{% get_media_prefix %}{{ object.idol.image }}"></div>
    <div class="happening-action"><span class="ss-icon ss-ban"></span></div>
    <div class="happening-subject icon-subject">
      <span class="ss-icon ss-mic"></span>
    </div>
  </div>
  {% else %}
  <div class="happening-event">
    <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> leaves <a href="{{ object.group.get_absolute_url }}">{{ object.group }}</a>
  </div>
  <div class="happening-illustration">
    <img src="{% get_media_prefix %}{{ object.idol.image }}">
    <div class="happening-action"><span class="ss-icon ss-upload"></span></div>
    <img src="{% get_media_prefix %}{{ object.group.image }}">
  </div>
  {% endif %}
{% endif %}
{% if event.date_field == "leadership_started" %}
<div class="happening-event">
  <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> becomes leader of <a href="{{ object.group.get_absolute_url }}">{{ object.group }}</a>
</div>
<div class="happening-illustration">
  <img src="{% get_media_prefix %}{{ object.idol.image }}">
  <div class="happening-action"><span class="ss-icon ss-download"></span></div>
  <img src="{% get_media_prefix %}{{ object.group.image }}">
</div>
{% endif %}
{% if event.date_field == "leadership_ended" %}
<div class="happening-event">
  <strong><a href="{{ object.idol.get_absolute_url }}">{{ object.idol }}</a></strong> steps down as leader of <a href="{{ object.group.get_absolute_url }}">{{ object.group }}</a>
</div>
<div class="happening-illustration">
  <img src="{% get_media_prefix %}{{ object.idol.image }}">
  <div class="happening-action"><span class="ss-icon ss-upload"></span></div>
  <img src="{% get_media_prefix %}{{ object.group.image }}">
</div>
{% endif %}
{% endwith %}
